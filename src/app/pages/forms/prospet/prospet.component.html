
<mat-card class="cardWithShadow theme-card">
  <mat-card-header>
    <mat-card-title class="m-b-0">Prospet</mat-card-title>
  </mat-card-header>
  <mat-card-content class="b-t-1">
    <mat-stepper #stepper>
      <mat-step [stepControl]="form">
        <form class="m-t-24" [formGroup]="form" >
          <ng-template matStepLabel>Assuré</ng-template>
          
          <mat-accordion >
            <mat-expansion-panel
              class="cardWithShadow"
              [expanded]="step === 0"
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
              hideToggle
            >
              <mat-expansion-panel-header>
                <mat-panel-title class="f-w-600 f-s-16"
                  >Cordonnées d'Assuré
                </mat-panel-title>
              </mat-expansion-panel-header>
          
              <div class="row">
                <div class="col-lg-6 col-sm-6">
                  <div class="row">
                    <div class="col-sm-12 d-flex align-items-center">
                      <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                        >Nom
                      </mat-label>
                    </div>
                    <div class="col-sm-12">
                      <mat-form-field appearance="outline" class="w-100">
                        <input matInput type="text" formControlName="nom"  id="nom" class="form-control" placeholder="Votre nom" />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 d-flex align-items-center">
                      <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                        >Date de naissance
                      </mat-label>
                    </div>
                    <div class="col-sm-12">
                      <mat-form-field class="w-100" appearance="outline" style="margin-bottom: 20px;">
                        
                        <input matInput [matDatepicker]="dp3" formControlName="DN"  id="DN" class="form-control" placeholder="MM/JJ/AAAA"/>
                        <mat-datepicker-toggle
                          matIconSuffix
                          [for]="dp3"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #dp3 ></mat-datepicker>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-6">
                  <div class="row">
                    <div class="col-sm-12 d-flex align-items-center">
                      <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                        >Prénom
                      </mat-label>
                    </div>
                    <div class="col-sm-12">
                      <mat-form-field appearance="outline" class="w-100">
                        <input matInput type="text" formControlName="prenom"  id="prenom" class="form-control" placeholder="Votre prénom"  />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 d-flex align-items-center">
                      <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16 "
                        >Régime sociale
                      </mat-label>
                    </div>
                    <div class="col-sm-12">
                      <mat-form-field appearance="outline" class="w-100">
                        <mat-select  id="regime" class="form-control"formControlName="regime" >
                          <mat-option value="Assuré social">Assuré social</mat-option>
                          <mat-option value="Alsace moselle">Alsace moselle</mat-option>
                          <mat-option value="Msa-exploitation-agricole">Msa-exploitation-agricole</mat-option>
                          <mat-option value="Msa-salarié-agricole">Msa-salarié-agricole</mat-option>
                          <mat-option value="Profession libérale">Profession libérale</mat-option>
                          <mat-option value="Tns">Tns</mat-option>
                          <mat-option value="Tns-immat-en-cours">Tns-immat-en-cours</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
              <mat-action-row >
                <button mat-flat-button color="primary" (click)="nextStep()">AJOUT</button>
              </mat-action-row>
            </mat-expansion-panel>
          
            <mat-expansion-panel
              class="cardWithShadow"
              [expanded]="step === 1"
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
              hideToggle
            >
              <mat-expansion-panel-header>
                <mat-panel-title class="f-w-600 f-s-16"
                  >Cordonnées du conjoint
                </mat-panel-title>
              </mat-expansion-panel-header>
          
              <div class="row">
                <div class="col-lg-6 col-sm-6">
                  <div class="row">
                    <div class="col-sm-12 d-flex align-items-center">
                      <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                        >Nom
                      </mat-label>
                    </div>
                    <div class="col-sm-12">
                      <mat-form-field appearance="outline" class="w-100">
                        <input matInput formControlName="nomc"  id="nomc" placeholder="Nom Conjoint" />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 d-flex align-items-center">
                      <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">Date de naissance</mat-label>
                    </div>
                    <div class="col-sm-12">
                      <mat-form-field appearance="outline" class="w-100">
                        <input matInput [matDatepicker]="datepickerr" formControlName="DNC"  id="DNC" placeholder="MM/JJ/AAAA" />
                        <mat-datepicker-toggle
                          matIconSuffix
                          [for]="datepickerr"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #datepickerr></mat-datepicker>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-6">
                  <div class="row">
                    <div class="col-sm-12 d-flex align-items-center">
                      <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                        >Prénom
                      </mat-label>
                    </div>
                    <div class="col-sm-12">
                      <mat-form-field appearance="outline" class="w-100">
                        <input matInput formControlName="prenomc"  id="prenomc" placeholder="Prénom Conjoint" />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 d-flex align-items-center">
                      <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16 "
                        >Régime sociale
                      </mat-label>
                    </div>
                    <div class="col-sm-12">
                      <mat-form-field appearance="outline" class="w-100">
                        <mat-select formControlName="regimec"  id="regimec" >
                          <mat-option value="Assuré social">Assuré social</mat-option>
                          <mat-option value="Alsace moselle">Alsace moselle</mat-option>
                          <mat-option value="Msa-exploitation-agricole">Msa-exploitation-agricole</mat-option>
                          <mat-option value="Msa-salarié-agricole">Msa-salarié-agricole</mat-option>
                          <mat-option value="Profession libérale">Profession libérale</mat-option>
                          <mat-option value="Tns">Tns</mat-option>
                          <mat-option value="Tns-immat-en-cours">Tns-immat-en-cours</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
              <mat-action-row>
                <button mat-flat-button color="warn" (click)="prevStep()">
                  Retour
                </button>
                <button mat-flat-button color="primary" (click)="nextStep()">AJOUT</button>
              </mat-action-row>
            </mat-expansion-panel>
          
            <mat-expansion-panel
              class="cardWithShadow"
              [expanded]="step === 2"
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
              hideToggle
            >
              <mat-expansion-panel-header>
                <mat-panel-title class="f-w-600 f-s-16">Cordonnées d'ajoutés </mat-panel-title>
              </mat-expansion-panel-header>
              
              <div class="col-sm-12 d-flex align-items-center">
                <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16 "
                  >Nombres d'enfants :
                </mat-label>
              </div>
              <mat-radio-group aria-label="Select an option" class="m-t-8" (change)="onSelectionChange($event)">
                <mat-radio-button value="0" color="primary">0</mat-radio-button>
                <mat-radio-button value="1" color="primary">1</mat-radio-button>
                <mat-radio-button value="2" color="primary">2</mat-radio-button>
              </mat-radio-group>
               <br>
               @if(selectedValue == 1) {
                <div class="row">
                  <div class="col-lg-6 col-sm-6">
                    <div class="row">
                      <div class="col-sm-12 d-flex align-items-center">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                          >Date de naissance de l'enfant 1
                        </mat-label>
                      </div>
                      <div class="col-sm-12">
                        <mat-form-field appearance="outline" class="w-100">
                          <input matInput [matDatepicker]="datepicker1" formControlName="DNE1"  id="DNE1" placeholder="MM/JJ/AAAA" />
                          <mat-datepicker-toggle
                            matIconSuffix
                            [for]="datepicker1"
                          ></mat-datepicker-toggle>
                          <mat-datepicker #datepicker1></mat-datepicker>
                        </mat-form-field>
                      </div>
                    </div>
                </div>
              </div>
                }
      
               @if(selectedValue ==2) {
                <div class="row">
                  <div class="col-lg-6 col-sm-6">
                    <div class="row">
                      <div class="col-sm-12 d-flex align-items-center">
                        <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                          >Date de naissance de l'enfant 1
                        </mat-label>
                      </div>
                      <div class="col-sm-12">
                        <mat-form-field appearance="outline" class="w-100">
                          <input matInput [matDatepicker]="datepicker1" formControlName="DNE1"  id="DNE1" placeholder="MM/JJ/AAAA" />
                          <mat-datepicker-toggle
                            matIconSuffix
                            [for]="datepicker1"
                          ></mat-datepicker-toggle>
                          <mat-datepicker #datepicker1></mat-datepicker>
                        </mat-form-field>
                      </div>
                    </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-6 col-sm-6">
                  <div class="row">
                    <div class="col-sm-12 d-flex align-items-center">
                      <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                        >Date de naissance de l'enfant 2
                      </mat-label>
                    </div>
                    <div class="col-sm-12">
                      <mat-form-field appearance="outline" class="w-100">
                        <input matInput [matDatepicker]="datepicker2" formControlName="DNE2"  id="DNE2" placeholder="MM/JJ/AAAA" />
                        <mat-datepicker-toggle
                          matIconSuffix
                          [for]="datepicker2"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #datepicker2></mat-datepicker>
                      </mat-form-field>
                    </div>
                  </div>
              </div>
            </div>
                }
              <mat-action-row>
                <button mat-flat-button color="warn" (click)="prevStep()">
                  Retour
                </button>
                <button mat-flat-button color="primary" (click)="nextStep()">Finir</button>
              </mat-action-row>
            </mat-expansion-panel>
          </mat-accordion> <br>
  

          <div class="text-right">
            <button mat-flat-button color="primary" matStepperNext >Suivant </button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup">
        <form class="m-t-24" [formGroup]="secondFormGroup">
          <ng-template matStepLabel>Cordonnées générales</ng-template>
          <div>
            <div class="row">
              <div class="col-lg-6 col-sm-6">
                <div class="row">
                  <div class="col-sm-12 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                      >Adresse</mat-label
                    >
                  </div>
                  <div class="col-sm-12">
                    <mat-form-field appearance="outline" class="w-100">
                      <input matInput placeholder="Adresse"id="adresse" class="form-control"formControlName="adresse" required />
                      <mat-icon matPrefix class="op-5">
                        <i-tabler
                          name="building-arch"
                          class="icon-20 d-flex"
                        ></i-tabler>
                      </mat-icon>
                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-12 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                      >Email</mat-label
                    >
                  </div>
                  <div class="col-sm-12">
                    <mat-form-field appearance="outline" class="w-100">
                      <input matInput placeholder="VotreEmail@exemple.com" type="email" id="email" class="form-control"formControlName="email"required />
                      <mat-icon matPrefix class="op-5">
                        <i-tabler name="mail" class="icon-20 d-flex"></i-tabler>
                      </mat-icon>
                    </mat-form-field>
                  </div>
                </div>
                
              </div>
              <div class="col-lg-6 col-sm-6">
                <div class="row">
                  <div class="col-sm-12 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                      >Code postal
                    </mat-label>
                  </div>
                  <div class="col-sm-12">
                    <mat-form-field appearance="outline" class="w-100">
                      <input matInput placeholder="Code postal" id="codeP" class="form-control"formControlName="codeP" required />
                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-12 d-flex align-items-center">
                    <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                      >Téléphone</mat-label
                    >
                  </div>
                  <div class="col-sm-12">
                    <mat-form-field appearance="outline" class="w-100">
                      <input matInput placeholder="123 4561 123"id="tel" class="form-control"formControlName="tel" required />
                      <mat-icon matPrefix class="op-5">
                        <i-tabler name="phone" class="icon-20 d-flex"></i-tabler>
                      </mat-icon>
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between">
            <button mat-flat-button color="warn" matStepperPrevious>
              Retour
            </button>
            <button mat-flat-button color="primary" [disabled]="!secondFormGroup.valid" matStepperNext>Suivant</button>
          </div>
        </form>
      </mat-step>
     <!--BESOINS-->
     <mat-step [stepControl]="secondFormGroup">
      <form class="m-t-24" [formGroup]="secondFormGroup">
        <ng-template matStepLabel>Besoins</ng-template>
        <div>
          <div class="row">
            <div class="col-lg-6 col-sm-6">
              <div class="row">
                <div class="col-sm-12 d-flex align-items-center">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                    >Horaires médicaux</mat-label
                  >
                </div>
                <mat-radio-group aria-label="Select an option" id="CONVENTION" class="form-control"formControlName="CONVENTION" required>
                 - 100% du tarif de convention?
                  <mat-radio-button value="2" color="accent"
                    >oui</mat-radio-button
                  >
                  <mat-radio-button value="3" color="warn"
                    >non</mat-radio-button
                  >
                </mat-radio-group>
                <mat-radio-group aria-label="Select an option" id="HONORAIRES" class="form-control"formControlName="HONORAIRES" required>
                 - Dépassement d'honoraires?
                  <mat-radio-button value="2" color="accent"
                    >oui</mat-radio-button
                  >
                  <mat-radio-button value="3" color="warn"
                    >non</mat-radio-button
                  >
                </mat-radio-group>
                <mat-radio-group aria-label="Select an option" id="MNATURELLE" class="form-control"formControlName="MNATURELLE" required>
                 - Médecine naturelle?
                  <mat-radio-button value="2" color="accent"
                    >oui</mat-radio-button
                  >
                  <mat-radio-button value="3" color="warn"
                    >non</mat-radio-button
                  >
                </mat-radio-group>
              </div> <br>
              <div class="row">
                <div class="col-sm-12 d-flex align-items-center">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                    >Hospitalisation</mat-label
                  >
                </div>
                <mat-radio-group aria-label="Select an option" id="HOSPITALISATION" class="form-control"formControlName="HOSPITALISATION" required>
                 - Hospitalisation de prévu ou à venir dans le 12 mois?
                  <mat-radio-button value="2" color="accent"
                    >oui</mat-radio-button
                  >
                  <mat-radio-button value="3" color="warn"
                    >non</mat-radio-button
                  >
                </mat-radio-group>
                <mat-radio-group aria-label="Select an option" id="TARIF" class="form-control"formControlName="TARIF" required>
                 - 100% du tarif de convention?
                  <mat-radio-button value="2" color="accent"
                    >oui</mat-radio-button
                  >
                  <mat-radio-button value="3" color="warn"
                    >non</mat-radio-button
                  >
                </mat-radio-group>
                <mat-radio-group aria-label="Select an option" id="DEPASSEMENTH" class="form-control"formControlName="DEPASSEMENTH" required>
                 - Dépassement d'honoraires?
                  <mat-radio-button value="2" color="accent"
                    >oui</mat-radio-button
                  >
                  <mat-radio-button value="3" color="warn"
                    >non</mat-radio-button
                  >
                </mat-radio-group>
                <mat-radio-group aria-label="Select an option" id="CHAMBRE" class="form-control"formControlName="CHAMBRE" required>
                 - Chambre particulière?
                  <mat-radio-button value="2" color="accent"
                    >oui</mat-radio-button
                  >
                  <mat-radio-button value="3" color="warn"
                    >non</mat-radio-button
                  >
                </mat-radio-group>
              </div> <br>
              
              
            </div> <br>
            <div class="col-lg-6 col-sm-6">
              
              <div class="row">
                <div class="col-sm-12 d-flex align-items-center">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                    >Dentaire</mat-label
                  >
                </div>
                <mat-radio-group aria-label="Select an option" id="BESOIND" class="form-control"formControlName="BESOIND" required>
                 - Vos besoins :
                  <mat-radio-button value="1" color="warn"
                    >Faible</mat-radio-button
                  >
                  <mat-radio-button value="2" color="accent"
                    >Moyen</mat-radio-button
                  >
                  <mat-radio-button value="3" color="primary"
                    >Fort</mat-radio-button
                  >
                </mat-radio-group>
                <mat-radio-group aria-label="Select an option" id="GARENTIED" class="form-control"formControlName="GARENTIED" required>
                 - Votre garentie :
                  <mat-radio-button value="1" color="accent"
                    >Soins,Prothèse ?</mat-radio-button
                  >
                  <mat-radio-button value="2" color="warn"
                    >Implantes ?</mat-radio-button
                  >
                </mat-radio-group>
              </div><br>
              <div class="row">
                <div class="col-sm-12 d-flex align-items-center">
                  <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16"
                    >Optique
                  </mat-label>
                </div>
                <mat-radio-group aria-label="Select an option" id="LUNETTES" class="form-control"formControlName="LUNETTES" required>
                 - Portez-vous des lunettes?
                  <mat-radio-button value="2" color="accent"
                    >oui</mat-radio-button
                  >
                  <mat-radio-button value="3" color="warn"
                    >non</mat-radio-button
                  >
                </mat-radio-group>
                <mat-radio-group aria-label="Select an option" id="FOPTIQUE" class="form-control"formControlName="FOPTIQUE" required>
                 - La garantie choisie avec mon conseiller, y a-t-il un <br> forfait optique?
                  <mat-radio-button value="2" color="accent"
                    >oui</mat-radio-button
                  >
                  <mat-radio-button value="3" color="warn"
                    >non</mat-radio-button
                  >
                </mat-radio-group>
              </div> <br>
             
            </div>
          </div>
        </div><br>
        <div class="d-flex align-items-center justify-content-between">
          <button mat-flat-button color="warn" matStepperPrevious>
            Retour
          </button>
          <button mat-flat-button color="primary" matStepperNext>Suivant</button>
        </div>
      </form>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Finir</ng-template>
      <form class="m-t-24" [formGroup]="finalForm">
        <div class="row">
          <div class="col-lg-6 col-sm-6">
            <div class="row">
              <div class="col-sm-12 d-flex align-items-center">
                <mat-label class="mat-subtitle-2 f-w-600 d-block m-b-16">
                  Date d'effet
                </mat-label>
              </div>
              <div class="col-sm-12">
                <mat-form-field appearance="outline" class="w-100">
                  <input matInput [matDatepicker]="effetpicker" placeholder="MM/JJ/AAAA" id="DE" class="form-control" formControlName="DE" />
                  <mat-datepicker-toggle matIconSuffix [for]="effetpicker"></mat-datepicker-toggle>
                  <mat-datepicker #effetpicker></mat-datepicker>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-between m-t-16">
          <button mat-flat-button color="warn" matStepperPrevious>Retour</button>
          <button mat-flat-button color="primary" (click)="EnregFich()" [disabled]="!finalForm.valid">Envoyer</button>
        </div>
      </form>
    </mat-step>
    
    